
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.1/jquery.form.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<style>

#progressbar {
    width: 300px;
    height: 10px
}
.ui-widget-header {
    background: blue;
}


</style>

<script>
$(function() {

    var bar = $('.bar');
    var percent = $('.percent');
    var status = $('#status');

    $('#uploadFile').ajaxForm({
        beforeSend: function() {
            status.empty();
            var percentVal = '0%';
            bar.width(percentVal);
            percent.html(percentVal);
        },
        uploadProgress: function(event, position, total, percentComplete) {
            var percentVal = percentComplete + '%';
            bar.width(percentVal);
            percent.html(percentVal);
            console.log(percentVal);
            $( "#progressbar" ).progressbar({
                value: percentComplete
            });

        },
        complete: function(xhr) {
            //status.html(xhr.responseText);
        }
    });

    $("#uploadFile").change( function() {
        console.log('file selected');

        $('#uploadFile').submit();
    });


    $('#uploadFile').submit(function() { 
        console.log('form submitted');
        // submit the form 
        $(this).ajaxSubmit(); 
        // return false to prevent normal browser submit and page navigation 
        return false; 
    });


});

</script>

<form id="uploadFile" name="uploadFile" action="http://www/upload" method="post" enctype="multipart/form-data">
    <input type="file" name="file"><br>
</form>


<div id="progressbar"></div>

<div class="progress">
    <div class="bar"></div >
    <div class="percent">0%</div >
</div>

<div id="status"></div>